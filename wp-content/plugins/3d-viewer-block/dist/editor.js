!function(){"use strict";var e=wp.blocks,t=JSON.parse('{"apiVersion":"1","name":"tdvb/td-viewer","title":"3D Viewer","description":"Display interactive 3D models on the web.","category":"widgets","keywords":["3d","3d model","3d viewer"],"textdomain":"3d-viewer-block","attributes":{"align":{"type":"string","default":""},"cId":{"type":"string","default":""},"alignment":{"type":"string","default":"center"},"sourceType":{"type":"string","default":"upload"},"model":{"type":"object","default":{"id":null,"url":"","title":""}},"modelLink":{"type":"string","default":"https://modelviewer.dev/shared-assets/models/shishkebab.glb"},"width":{"type":"string","default":"100%"},"height":{"type":"string","default":"350px"},"isTouchMove":{"type":"boolean","default":true},"isZoom":{"type":"boolean","default":true},"loadingType":{"type":"string","default":"auto"}},"supports":{"align":["wide","full"],"html":false},"example":{"attributes":{"preview":true,"sourceType":"link"}},"editorScript":"file:dist/editor.js","script":"file:dist/script.js"}'),l=wp.i18n,n=wp.element,r=wp.blockEditor,o=wp.components,a=function(e){var t=e.mt,l=e.mb,n=e.children;return wp.element.createElement("p",{className:"bPlLabel",style:{marginTop:"".concat(t||"20px"),marginBottom:"".concat(l||"5px")}},n)},i=function(e){var t=e.className,l=e.value,n=e.onChange,r=e.options,a=e.isIcon,i=void 0!==a&&a,c=e.isTextIcon,m=void 0!==c&&c,u=e.size;return wp.element.createElement(o.ButtonGroup,{className:"bPlBtnGroup ".concat(t||null)},Object.values(r).map((function(e){return wp.element.createElement(o.Tooltip,{key:e.value,text:e.label,position:"top"},wp.element.createElement(o.Button,{icon:i?null==e?void 0:e.icon:null,isPrimary:l===e.value,"aria-pressed":l===e.value,isSmall:"small"===u,isMedium:"small"!==u,onClick:function(){return n(e.value,e.def&&e.def)}},m?e.icon:i?"":e.label))})))},c={sourceTypes:[{label:(0,l.__)("Upload","3d-viewer-block"),value:"upload"},{label:(0,l.__)("Link","3d-viewer-block"),value:"link"}],loadingTypes:[{label:(0,l.__)("Auto","3d-viewer-block"),value:"auto"},{label:(0,l.__)("Lazy","3d-viewer-block"),value:"lazy"},{label:(0,l.__)("Eager","3d-viewer-block"),value:"eager"}],pxUnit:{value:"px",label:"px",default:0},perUnit:{value:"%",label:"%",default:0},emUnit:{value:"em",label:"em",default:0},remUnit:{value:"rem",label:"rem",default:0},vwUnit:{value:"vw",label:"vw",default:0},vhUnit:{value:"vh",label:"vh",default:0}};function m(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function u(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?m(Object(l),!0).forEach((function(t){d(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):m(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function d(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var s=c.sourceTypes,p=c.loadingTypes,w=c.pxUnit,v=c.perUnit,b=c.emUnit,g=function(e){var t=e.attributes,n=e.setAttributes,c=t.alignment,m=t.sourceType,d=t.model,g=t.modelLink,f=t.width,h=t.height,E=t.isTouchMove,k=t.isZoom,_=t.loadingType,y=function(e){var t=e.id,l=e.url,r=e.title;return n({model:u(u({},d),{},{id:t,url:l,title:r})})};return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{className:"bPlPanelBody help",title:(0,l.__)("Help","3d-viewer-block")},wp.element.createElement("div",{className:"helpItem"},wp.element.createElement("a",{href:"https://bblockswp.com/docs/3d-viewer-block/",target:"_blank",rel:"noreferrer"},wp.element.createElement(o.Dashicon,{icon:"book"}),(0,l.__)("Read Documentation","3d-viewer-block"))),wp.element.createElement("div",{className:"helpItem rateUs"},wp.element.createElement("a",{href:"https://wordpress.org/support/plugin/3d-viewer-block/reviews/#new-post",target:"_blank",rel:"noreferrer"},wp.element.createElement("span",null,wp.element.createElement(o.Dashicon,{icon:"star-filled"}),(0,l.__)("Would you please rate us?","3d-viewer-block")),wp.element.createElement("span",null,(0,l.__)("We are new and we need your help to grow!🙏","3d-viewer-block"))))),wp.element.createElement(o.PanelBody,{className:"bPlPanelBody",title:(0,l.__)("3D Model Settings","3d-viewer-block")},wp.element.createElement(o.PanelRow,null,wp.element.createElement(a,{mt:"0"},(0,l.__)("Source Type:","3d-viewer-block")),wp.element.createElement(i,{value:m,onChange:function(e){return n({sourceType:e})},options:s})),"upload"===m&&wp.element.createElement("small",null,(0,l.__)("Please refresh the page first, if you install the plugin for the first time from gutenberg editor")),"upload"===m&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(a,null,(0,l.__)("Upload:","3d-viewer-block")),wp.element.createElement("div",{className:"editImageHolder"},wp.element.createElement("div",{className:"mediaControl"},wp.element.createElement(r.MediaUpload,{allowedTypes:["model/gltf-binary"],value:null==d?void 0:d.id,onSelect:y,render:function(e){var t=e.open;return d.url?wp.element.createElement("div",{className:"btnControl"},wp.element.createElement(o.Button,{icon:"controls-repeat",onClick:t},(0,l.__)("Replace","3d-viewer-block")),wp.element.createElement(o.Button,{icon:"exit",onClick:function(){return n({model:{id:null,url:"",title:""}})},className:"btnRed"},(0,l.__)("Remove","3d-viewer-block"))):wp.element.createElement("div",{className:"btnControl"},wp.element.createElement(o.Button,{icon:"upload",onClick:t},(0,l.__)("Upload","3d-viewer-block")))}})),wp.element.createElement("model-viewer",{class:"modelPreview",src:null==d?void 0:d.url,alt:null==d?void 0:d.title}))),"link"===m&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(a,null,(0,l.__)("Model Link:","3d-viewer-block")),wp.element.createElement(o.TextControl,{value:g,onChange:function(e){return n({modelLink:e})}})),wp.element.createElement(o.__experimentalUnitControl,{className:"mt20",label:(0,l.__)("Width:","3d-viewer-block"),labelPosition:"left",value:f,onChange:function(e){return n({width:e})},units:[w,v,b]}),wp.element.createElement("small",null,(0,l.__)("Keep width 0, to auto width.","3d-viewer-block")),wp.element.createElement(o.__experimentalUnitControl,{className:"mt20",label:(0,l.__)("Height:","3d-viewer-block"),labelPosition:"left",value:h,onChange:function(e){return n({height:e})},units:[w,v,b]}),wp.element.createElement("small",null,(0,l.__)("Keep height 0, to 350px height.","3d-viewer-block")),wp.element.createElement(o.ToggleControl,{className:"mt20",label:(0,l.__)("Controls via mouse/touch","3d-viewer-block"),checked:E,onChange:function(e){return n({isTouchMove:e})}}),E&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(o.ToggleControl,{className:"mt20",label:(0,l.__)("Zoom","3d-viewer-block"),checked:k,onChange:function(e){return n({isZoom:e})}}),wp.element.createElement("small",null,(0,l.__)("Enable 'Controls via mouse/touch' to work Zoom!","3d-viewer-block"))),wp.element.createElement(o.PanelRow,{className:"mt20"},wp.element.createElement(a,{mt:"0",mb:"0"},(0,l.__)("Loading Type:","b-blocks")),wp.element.createElement(o.SelectControl,{value:_,onChange:function(e){return n({loadingType:e})},options:p})))),wp.element.createElement(r.BlockControls,null,(null==d?void 0:d.url)&&wp.element.createElement(o.ToolbarGroup,{className:"bPlToolbar"},wp.element.createElement(r.MediaUploadCheck,null,wp.element.createElement(r.MediaUpload,{allowedTypes:["model/gltf-binary"],value:null==d?void 0:d.id,onSelect:y,render:function(e){var t=e.open;return wp.element.createElement(o.ToolbarButton,{label:(0,l.__)("Edit 3D Model:","3d-viewer-block"),icon:"edit",onClick:t})}}))),wp.element.createElement(r.AlignmentToolbar,{value:c,onChange:function(e){return n({alignment:e})},describedBy:(0,l.__)("3D Model Alignment"),alignmentControls:[{title:(0,l.__)("3D Model in left","3d-viewer-block"),align:"left",icon:"align-left"},{title:(0,l.__)("3D Model in center","3d-viewer-block"),align:"center",icon:"align-center"},{title:(0,l.__)("3D Model in right","3d-viewer-block"),align:"right",icon:"align-right"}]})))},f=function(e){var t=e.attributes,l=e.clientId,n=t.alignment,r=t.width,o=t.height;return wp.element.createElement("style",{dangerouslySetInnerHTML:{__html:"\n\t\t#tdvb3DViewerBlock-".concat(l," .tdvb3DViewerBlock{\n\t\t\ttext-align: ").concat(n,";\n\t\t}\n\t\t#tdvb3DViewerBlock-").concat(l," .tdvb3DViewerBlock model-viewer{\n\t\t\twidth: ").concat("0px"===r||"0%"===r||"0em"===r?"auto":r,";\n\t\t\theight: ").concat("0px"===o||"0%"===o||"0em"===o?"350px":o,";\n\t\t}\n\t\t").replace(/\s+/g," ")}})},h=(0,n.forwardRef)((function(e,t){var l=e.attributes,n=l.sourceType,r=l.model,o=l.modelLink,a=l.loadingType;return wp.element.createElement("div",{className:"tdvb3DViewerBlock",ref:t},wp.element.createElement("model-viewer",{src:"upload"===n?null==r?void 0:r.url:o,alt:"upload"===n?null==r?void 0:r.title:"","camera-controls":!0,loading:a,"auto-rotate":!0}))})),E=function(e){var t=e.className,r=e.attributes,o=e.setAttributes,a=e.clientId,i=r.sourceType,c=r.model,m=r.modelLink,u=r.isTouchMove,d=r.isZoom,s=r.loadingType;(0,n.useEffect)((function(){a&&o({cId:a.substring(0,10)})}),[a]);var p=(0,n.useRef)(null),w=function(e,t,l,n){t&&(null==e||e.setAttribute(l,n)),!t&&(null==e||e.removeAttribute(l,n))};return(0,n.useEffect)((function(){p.current.innerHTML="";var e=document.createElement("model-viewer");w(e,!0,"class","tdvbModel"),w(e,!0,"src","upload"===i?null==c?void 0:c.url:m),w(e,!0,"alt","upload"===i?null==c?void 0:c.title:""),w(e,u,"camera-controls",""),w(e,!d,"disable-zoom",""),w(e,!0,"loading",s),w(e,!0,"auto-rotate",""),p.current.appendChild(e)}),[i,c,m,u,d,s]),wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(g,{attributes:r,setAttributes:o,clientId:a}),wp.element.createElement("div",{className:t,id:"tdvb3DViewerBlock-".concat(a)},wp.element.createElement(f,{attributes:r,clientId:a}),"upload"!==i||c.url?"":wp.element.createElement("p",{className:"noModel"},(0,l.__)("Please, upload Model or enter Model Link first!","3d-viewer-block")),wp.element.createElement(h,{attributes:r,ref:p})))},k={tDViewer:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 512 512"},wp.element.createElement("path",{fill:"#4527a4",d:"M68.983,382.642l171.35,98.928a32.082,32.082,0,0,0,32,0l171.352-98.929a32.093,32.093,0,0,0,16-27.713V157.071a32.092,32.092,0,0,0-16-27.713L272.334,30.429a32.086,32.086,0,0,0-32,0L68.983,129.358a32.09,32.09,0,0,0-16,27.713V354.929A32.09,32.09,0,0,0,68.983,382.642ZM272.333,67.38l155.351,89.691V334.449L272.333,246.642ZM256.282,274.327l157.155,88.828-157.1,90.7L99.179,363.125ZM84.983,157.071,240.333,67.38v179.2L84.983,334.39Z"}))};(0,e.registerBlockType)(t,{icon:k.tDViewer,edit:E,save:function(){return null}})}();
//# sourceMappingURL=editor.js.map