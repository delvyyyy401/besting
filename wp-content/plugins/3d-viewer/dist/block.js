(()=>{"use strict";const e=JSON.parse('{"apiVersion":"1","name":"b3dviewer/modelviewer","title":"Model Viewer","description":"","category":"design","icon":"visibility","keywords":["3D Viewer","3D Embedder","3D Model Viewer"],"textdomain":"model-viewer","attributes":{"uniqueId":{"type":"string","default":"uniqueId"},"multiple":{"type":"boolean","default":false},"model":{"type":"object","default":{}},"models":{"type":"array","default":[{"modelUrl":"","poster":"","useDecoder":"none"}]},"lazyLoad":{"type":"boolean","default":true},"autoplay":{"type":"boolean","default":true},"shadow":{"type":"boolean","default":true},"rotate":{"type":"boolean","default":false},"autoRotate":{"type":"boolean","default":false},"mouseControl":{"type":"boolean","default":true},"fullscreen":{"type":"boolean","default":true},"variant":{"type":"boolean","default":false},"loadingPercentage":{"type":"boolean","default":false},"progressBar":{"type":"boolean","default":true},"rotateAlongX":{"type":"number","default":"0"},"rotateAlongY":{"type":"number","default":75},"exposure":{"type":"number","default":1},"styles":{"type":"object","default":{"width":"100%","height":"300px","bgColor":"#ffffff"}},"stylesheet":{"type":"string"},"additional":{"type":"object","default":{"ID":"","Class":"","CSS":""}},"animation":{"type":"boolean","default":false},"woo":{"type":"boolean","default":false},"selectedAnimation":{"type":"string","default":""}},"supports":{"html":false,"lock":false,"align":["left","right","center"]},"example":{"attributes":{"preview":true}}}'),t=wp.i18n,n=wp.components,l=wp.element;function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var l,r,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(l=n.next()).done)&&(a.push(l.value),!t||a.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}var o=wp.element,i=o.useState,c=o.Fragment,u=wp.components,m=u.Dropdown,p=u.ColorPicker,d=u.Button;wp.i18n.__;const s=function(e){var t=e.value,n=e.title,l=void 0===n?"":n,a=e.toolbar,o=void 0!==a&&a,u=e.defaultColor,s=e.onChange,w=(e.className,e.disableAlpha,e.boxPosition),b=void 0===w?"top left":w,v=e.globalColors,f=void 0===v?[]:v,g=r(i(t),2),y=g[0],E=g[1];return wp.element.createElement("div",{className:"BColor"},wp.element.createElement(m,{position:b,renderToggle:function(e){var n=e.isOpen,r=e.onToggle;return wp.element.createElement("div",{style:{display:"flex"}},u&&u!=y&&wp.element.createElement(d,{icon:"image-rotate",className:"bColorReset",onClick:function(){s(u),E(u)}}),!o&&wp.element.createElement("div",{className:"BColorButtonContainer"},wp.element.createElement(d,{className:"BColorButton",title:l,onClick:r,"aria-expanded":n,style:t?{backgroundColor:t}:{backgroundColor:"transparent"}})),o&&wp.element.createElement("div",{className:"BColorToolbar",onClick:r},wp.element.createElement("p",null,"A"),wp.element.createElement("p",{className:"color",style:{background:t}})))},renderContent:function(e){var n=e.isOpen;e.onToggle,e.onClose;return wp.element.createElement(c,null,wp.element.createElement(p,{color:t||"",onChangeComplete:function(e){s(e.hex),E(e.hex)}}),f.length>0&&wp.element.createElement("div",{style:{display:"flex"},className:"globalColors"},f.map((function(e){return wp.element.createElement("div",{className:"BColorButtonContainer"},wp.element.createElement("button",{className:"BColorButton",onClick:function(){s(e.color),E(e)},"aria-expanded":n,style:t?{backgroundColor:e.color}:{backgroundColor:"transparent"}}))}))))}}))};wp.i18n.__;var w=wp.element.Fragment,b=wp.blockEditor,v=b.MediaUpload,f=b.MediaUploadCheck,g=wp.components,y=g.Button,E=g.PanelRow,h=g.TextControl;const _=function(e){var t=e.value,n=e.type,l=void 0===n?[]:n,r=e.onSelect,a=e.placeholder,o=e.label;return wp.element.createElement("div",{className:"bMediaUpload"},wp.element.createElement(w,null,o&&wp.element.createElement("label",null,o),wp.element.createElement(E,{className:"width-100"},wp.element.createElement(f,{fallback:wp.element.createElement(y,{icon:"upload",className:"button button-primary",onClick:function(){var e=wp.media({button:{text:"Select"},multiple:!1});e.open(),e.on("select",(function(){var t=e.state().get("selection").first().toJSON();r(t.url)}))}})},wp.element.createElement(v,{allowedTypes:l,onSelect:function(e){return r(e.url)},render:function(e){var t=e.open;return wp.element.createElement(y,{className:"button button-primary",onClick:t,icon:"upload"})}})),wp.element.createElement(h,{value:t,onChange:function(e){return r(e)},placeholder:a}))))};var C=["units","value","onChange","isResetValueOnUnitChange"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},S.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var A=wp.components.__experimentalUnitControl;const k=function(e){var t=e.units,n=void 0===t?[{value:"px",label:"px",default:16},{value:"em",label:"em",default:1}]:t,l=e.value,r=e.onChange,a=e.isResetValueOnUnitChange,o=void 0===a||a,i=O(e,C);return wp.element.createElement("div",{id:"BUnitControl"},wp.element.createElement(A,S({onChange:r,isResetValueOnUnitChange:o,value:l,units:n},i)))};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}const I=function(e){var l=e.props,r=l.setAttributes,a=l.attributes,o=a.model,i=a.models,c=a.multiple,u=function(e,t,n){var l=N(i);l[n][e]=t,r({models:l})};return wp.element.createElement(n.PanelBody,{title:(0,t.__)("Model","b3d-viewer-lite")},wp.element.createElement(n.PanelRow,null,wp.element.createElement("label",null,(0,t.__)("Use Multiple Model?","b3d-viewer-lite")),wp.element.createElement(n.FormToggle,{checked:c,onChange:function(){return r({multiple:!c})}})),c?wp.element.createElement(wp.element.Fragment,null,null==i?void 0:i.map((function(e,l){return wp.element.createElement(n.PanelBody,{title:(0,t.__)("Model ","b3d-viewer-lite")+parseInt(l+1),initialOpen:!1,className:"modelPanel"},wp.element.createElement(_,{value:null==e?void 0:e.modelUrl,placeholder:(0,t.__)("Model URL","b3d-viewer-lite"),onSelect:function(e){return u("modelUrl",e,l)},type:["model/gltf-binary"],label:(0,t.__)("Model URL","b3d-viewer-lite")}),wp.element.createElement(_,{value:null==e?void 0:e.poster,placeholder:(0,t.__)("Model Poster","b3d-viewer-lite"),onSelect:function(e){return u("poster",e,l)},type:["image"],label:(0,t.__)("Model Poster","b3d-viewer-lite")}),wp.element.createElement(n.PanelRow,null,wp.element.createElement("label",null,(0,t.__)("Use Decoder","b3d-viewer-lite")),wp.element.createElement(n.SelectControl,{options:[{label:"None",value:"none"},{label:"Draco",value:"draco"}],value:null==e?void 0:e.decoder,onChange:function(e){return u("decoder",e,l)}})),"draco"===(null==e?void 0:e.decoder)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(_,{value:null==e?void 0:e.binFile,placeholder:(0,t.__)("Bin File","b3d-viewer-lite"),onSelect:function(e){return u("binFile",e,l)},type:["application/octet-stream"],label:(0,t.__)("Bin File","b3d-viewer-lite")})),1!==i.length&&wp.element.createElement(n.PanelRow,{className:"modelRemover"},wp.element.createElement(n.Button,{variant:"primary",onClick:function(){var e=N(i);e.splice(l,1),r({models:e})}},(0,t.__)("Remove","b3d-viewer-lite"))))}))):wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(_,{value:null==o?void 0:o.modelUrl,placeholder:(0,t.__)("Model URL","b3d-viewer-lite"),onSelect:function(e){return r({model:x(x({},o),{},{modelUrl:e})})},type:["model/gltf-binary"],label:(0,t.__)("Model URL","b3d-viewer-lite")}),wp.element.createElement(_,{value:null==o?void 0:o.poster,placeholder:(0,t.__)("Model Poster","b3d-viewer-lite"),onSelect:function(e){return r({model:x(x({},o),{},{poster:e})})},type:["image"],label:(0,t.__)("Model Poster","b3d-viewer-lite")}),wp.element.createElement(n.PanelRow,null,wp.element.createElement("label",null,(0,t.__)("Use Decoder","b3d-viewer-lite")),wp.element.createElement(n.SelectControl,{options:[{label:"None",value:"none"},{label:"Draco",value:"Draco"}],vlaue:null==o?void 0:o.decoder,onChange:function(e){return r({model:x(x({},o),{},{decoder:e})})}})),"Draco"===(null==o?void 0:o.decoder)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(_,{value:null==o?void 0:o.binFile,placeholder:(0,t.__)("Bin File","b3d-viewer-lite"),onSelect:function(e){return r({model:x(x({},o),{},{binFile:e})})},type:["application/octet-stream"],label:(0,t.__)("Bin File","b3d-viewer-lite")}))),c&&wp.element.createElement(n.PanelRow,null,wp.element.createElement(n.Button,{variant:"primary",onClick:function(){var e=N(i);e.push({}),r({models:e})}},(0,t.__)("Add New","b3d-viewer-lite"))))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=wp.components,T=U.TabPanel,F=U.Panel,L=U.PanelBody,V=U.PanelRow,z=U.FormToggle,H=wp.blockEditor.InspectorControls,X=wp.components,q=X.SelectControl,Y=X.TextareaControl;const W=function(e){var r,a,o=e.props,i=e.animations,c=o.attributes,u=o.setAttributes,m=c.variant,p=c.animation,d=c.multiple,w=c.styles,b=c.rotate,v=c.rotateAlongX,f=c.rotateAlongY,g=c.autoplay,y=c.lazyLoad,E=c.shadow,h=c.fullscreen,C=c.mouseControl,S=c.additional,O=c.exposure,A=c.selectedAnimation,P=c.loadingPercentage,x=c.progressBar,j=c.autoRotate,N=c.woo,B=(0,l.useRef)(),R=(null===(r=wp.data.select("core/editor"))||void 0===r?void 0:r.getCurrentPostType())||"product",M=null===(a=wp.data.select("core/editor"))||void 0===a?void 0:a.getCurrentPostId();return wp.element.createElement(H,null,"3d-viewer"===R&&wp.element.createElement(L,null,wp.element.createElement(V,null,wp.element.createElement("div",{className:"b3dviewer_front_shortcode"},wp.element.createElement("input",{onClick:function(e){var n=e.target;n.select(),n.setSelectionRange(0,30),document.execCommand("copy"),B.current.innerHTML=(0,t.__)("Copied Successfully!","b3d-viewer-lite"),setTimeout((function(){B.current.innerHTML=(0,t.__)("Copy To Clipboard","b3d-viewer-lite")}),1500)},value:"[b3dviewer id=".concat(M,"]")}),wp.element.createElement("span",{ref:B,className:"htooltip"},(0,t.__)("Copy To Clipboard","b3d-viewer-lite"))))),wp.element.createElement(T,{className:"b3dviewer-tab-panel",activeClass:"active",tabs:[{name:"settings",title:(0,t.__)("Settings","b3d-viewer-lite"),className:"settings"},{name:"style",title:(0,t.__)("Style","b3d-viewer-lite"),className:"style"}]},(function(e){return wp.element.createElement("span",null,"settings"===e.name&&wp.element.createElement(F,null,wp.element.createElement(I,{props:o}),wp.element.createElement(L,{title:(0,t.__)("Options","b3d-viewer-lite")},wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Fullscreen","b3d-viewer-lite")),wp.element.createElement(z,{checked:h,onChange:function(){return u({fullscreen:!h})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Mouse Control","b3d-viewer-lite")),wp.element.createElement(z,{checked:C,onChange:function(){return u({mouseControl:!C})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Lazy Load","b3d-viewer-lite")),wp.element.createElement(z,{checked:y,onChange:function(){return u({lazyLoad:!y})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Show Loading Percentage","b3d-viewer-lite")),wp.element.createElement(z,{checked:P,onChange:function(){return u({loadingPercentage:!P})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Show Progressbar","b3d-viewer-lite")),wp.element.createElement(z,{checked:x,onChange:function(){return u({progressBar:!x})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Enable Shadow","b3d-viewer-lite")),wp.element.createElement(z,{checked:E,onChange:function(){return u({shadow:!E})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Autoplay ( if animated )","b3d-viewer-lite")),wp.element.createElement(z,{checked:g,onChange:function(){return u({autoplay:!g})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Enable Variant Selector","b3d-viewer-lite")),wp.element.createElement(z,{checked:m,onChange:function(){return u({variant:!m})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Enable Animation Selector","b3d-viewer-lite")),wp.element.createElement(z,{checked:p,onChange:function(){return u({animation:!p})}})),0!==i.length&&!d&&wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Set Animation","b3d-viewer-lite")),wp.element.createElement(q,{options:i,value:A,onChange:function(e){return u({selectedAnimation:e})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Auto Rotate","b3d-viewer-lite")),wp.element.createElement(z,{checked:j,onChange:function(){return u({autoRotate:!j})}})),!d&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Rotate","b3d-viewer-lite")),wp.element.createElement(z,{checked:b,onChange:function(){return u({rotate:!b})}})),b&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Rotate Along X","b3d-viewer-lite")),wp.element.createElement(n.__experimentalNumberControl,{onChange:function(e){return u({rotateAlongX:parseInt(e)})},value:v,max:360,min:0})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Rotate Along Y","b3d-viewer-lite")),wp.element.createElement(n.__experimentalNumberControl,{onChange:function(e){return u({rotateAlongY:parseInt(e)})},value:f,max:360,min:0})))),wp.element.createElement(n.RangeControl,{label:(0,t.__)("Exposure","b3d-viewer-lite"),value:O,onChange:function(e){return u({exposure:e})},min:.1,step:.1,max:10}))),"style"===e.name&&wp.element.createElement(F,null,wp.element.createElement(L,{title:(0,t.__)("Style","b3d-viewer-lite")},!N&&wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Width","b3d-viewer-lite")),wp.element.createElement(k,{value:null==w?void 0:w.width,onChange:function(e){return u({styles:D(D({},w),{},{width:e})})},units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100}]})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Height","b3d-viewer-lite")),wp.element.createElement(k,{value:null==w?void 0:w.height,onChange:function(e){return u({styles:D(D({},w),{},{height:e})})},units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vh",label:"vh",default:100}]})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Background Color","b3d-viewer-lite")),wp.element.createElement(s,{value:(null==w?void 0:w.bgColor)||"#ffffff",defaultColor:"#ffffff",onChange:function(e){return u({styles:D(D({},w),{},{bgColor:e})})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,wp.element.createElement("strong",null,(0,t.__)("Note: Color will be ignore if background image used","b3d-viewer-lite")))),wp.element.createElement("br",null),wp.element.createElement(_,{label:(0,t.__)("Background Image","b3d-viewer-lite"),placeholder:(0,t.__)("Background Image","b3d-viewer-lite"),value:null==w?void 0:w.bgImage,onSelect:function(e){return u({styles:D(D({},w),{},{bgImage:e})})}})),wp.element.createElement(L,{title:(0,t.__)("Additional","b3d-viewer-lite")},wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("ID","b3d-viewer-lite")),wp.element.createElement(n.TextControl,{value:S.ID,onChange:function(e){return u({additional:D(D({},S),{},{ID:e})})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("Class","b3d-viewer-lite")),wp.element.createElement(n.TextControl,{value:S.Class,onChange:function(e){return u({additional:D(D({},S),{},{Class:e})})}})),wp.element.createElement(V,null,wp.element.createElement("label",null,(0,t.__)("CSS","b3d-viewer-lite"))),wp.element.createElement(Y,{value:S.CSS,onChange:function(e){return u({additional:D(D({},S),{},{CSS:e})})}}))))})))};function $(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var l,r,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(l=n.next()).done)&&(a.push(l.value),!t||a.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return a}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}var Q=wp.element,Z=Q.useEffect,ee=Q.useState,te=Q.useRef;const ne=(0,wp.data.withSelect)((function(e){var t=!1;e("core/edit-post")&&(t=(0,e("core/edit-post").isEditorSidebarOpened)());return{isSidebarOpened:t}}))((function(e){var n,l,r,a=e.clientId,o=e.attributes,i=e.setAttributes,c=e.isSidebarOpened,u=void 0!==c&&c,m=J(ee([]),2),p=m[0],d=m[1],s=J(ee(!1),2),w=s[0],b=s[1],v=o.uniqueId,f=o.styles,g=o.stylesheet,y=o.model,E=o.models,h=o.fullscreen,_=o.variant,C=o.multiple,S=o.additional,O=o.exposure,A=o.selectedAnimation,k=o.animation,P=o.progressBar,x=o.autoRotate,j=o.autoplay,N=o.rotateAlongX,B=o.align,I=o.woo,R=te(),D=te(),M=te();Z((function(){var e,t=(null===(e=wp.data.select("core/editor"))||void 0===e?void 0:e.getCurrentPostType())||"product",n=!!["product",null].includes(t);i({uniqueId:"b3dviewer"+a.substr(0,8),woo:n})}),[]),Z((function(){var e=I?"":"width: ".concat(null==f?void 0:f.width,";"),t="#".concat(v," {").concat(e,"height: ").concat(null==f?void 0:f.height,"} #").concat(v," .select {display: none} #").concat(v," model-viewer {background: ").concat(null==f?void 0:f.bgColor," ").concat(null!=f&&f.bgImage?"url(".concat(null==f?void 0:f.bgImage,")"):""," no-repeat center center; background-size: cover;} ").concat(P?"":"#".concat(v," model-viewer::part(default-progress-bar) { display: none}")," ").concat(null==S?void 0:S.CSS);i({stylesheet:t})}),[v,f,S,P]),Z((function(){try{new URL(U),b(!0)}catch(e){b(!1)}setTimeout((function(){var e;modelRendrer({animation:k,variant:_,wrapper:null===(e=R.current)||void 0===e?void 0:e.parentElement})}),10),R.current&&R.current.addEventListener("load",(function(){var e=R.current.availableAnimations.map((function(e){return{label:e,value:e}}));d([].concat($(e),[{label:"None",value:""}]))}))}),[v,y,E,C]),Z((function(){var e;j||(null===(e=R.current)||void 0===e||e.pause())}),[j]),Z((function(){R.current&&M.current&&(R.current.animationName=A,M.current.querySelector("select").value=A)}),[A]),Z((function(){D.current&&(D.current.style.display=_?"inline-block":"none")}),[_]),Z((function(){M.current&&(k&&R.current.loaded?M.current.style.display="inline-block":M.current.style.display="none")}),[k,M]),Z((function(){var e;null!==(e=R.current)&&void 0!==e&&e.turntableRotation&&R.current.resetTurntableRotation()}),[N]),Z((function(){if(R.current){var e=o.mouseControl,t=o.autoplay,n=o.shadow,l=o.rotate,r=o.rotateAlongX,a=o.rotateAlongY;e?R.current.setAttribute("camera-controls",""):R.current.removeAttribute("camera-controls"),t?R.current.setAttribute("autoplay",""):R.current.removeAttribute("autoplay"),n?R.current.setAttribute("shadow-intensity","1"):R.current.removeAttribute("shadow-intensity"),n?R.current.setAttribute("shadow-softness","1"):R.current.removeAttribute("shadow-softness"),x?R.current.setAttribute("auto-rotate",""):R.current.removeAttribute("auto-rotate"),l?R.current.setAttribute("camera-orbit","".concat(r,"deg ").concat(a,"deg 105%")):R.current.removeAttribute("camera-orbit"),R.current.setAttribute("exposure",O)}}),[o]);var U=C?null===(n=E[0])||void 0===n?void 0:n.modelUrl:null==y?void 0:y.modelUrl,T=C?null===(l=E[0])||void 0===l?void 0:l.poster:null==y?void 0:y.poster;return wp.element.createElement("div",{id:"".concat(v),className:"b3dviewer align".concat(B," ").concat(I?"woocommerce":"")},wp.element.createElement("div",{id:null==S?void 0:S.ID,className:"".concat(null==S?void 0:S.Class," b3dviewer-wrapper")},wp.element.createElement(W,{props:e,animations:p}),wp.element.createElement("style",null,g),U&&w&&wp.element.createElement("model-viewer",{"camera-controls":!0,ref:R,"data-js-focus-visible":!0,"data-decoder":C?null===(r=E[0])||void 0===r?void 0:r.decoder:null==y?void 0:y.decoder,poster:T,src:U,alt:"A 3D model"},h&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("svg",{id:"openBtn",width:"24px",height:"24px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#f2f2f2",class:"bi bi-arrows-fullscreen"},wp.element.createElement("path",{"fill-rule":"evenodd",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"})),wp.element.createElement("svg",{id:"closeBtn",className:u?"sidebar-open":"sidebar-closed",width:"34px",height:"34px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{fill:"none",stroke:"#333","stroke-width":"2",d:"M7,7 L17,17 M7,17 L17,7"}))),wp.element.createElement("div",{class:"variantWrapper select",ref:D},(0,t.__)("Variant","b3d-viewer-lite")," ",wp.element.createElement("select",{id:"variant"})),wp.element.createElement("div",{class:"animationWrapper select",ref:M},(0,t.__)("Animations","b3d-viewer-lite")," ",wp.element.createElement("select",{id:"animations",onChange:function(e){i({selectedAnimation:e.target.value})}})),C&&wp.element.createElement("div",{class:"slider"},wp.element.createElement("div",{class:"slides"},E.map((function(e,t){return wp.element.createElement("button",{className:"slide ".concat(0===t?"selected":""),"data-source":null==e?void 0:e.modelUrl,"data-poster":null==e?void 0:e.poster},wp.element.createElement("img",{src:null==e?void 0:e.poster}))}))))),U&&!w&&wp.element.createElement("h2",null,(0,t.__)("3D file not valid","b3d-viewer-lite")),!U&&wp.element.createElement("h2",null,(0,t.__)("Click here to upload 3D Models","b3d-viewer-lite"))))}));(0,wp.blocks.registerBlockType)(e,{edit:ne,save:function(){return null}})})();